import"../chunks/DsnmJJEf.js";import{i as Re}from"../chunks/UKr5Fem5.js";import{o as je}from"../chunks/CoPpAxPq.js";import{p as Oe,V as Ne,W as Pe,f as R,i as X,k as Z,s as P,e as k,h as Te,m as ne,g as d,c as b,n as Ke,r as S,u as B,t as U,b as V,a as We,d as ze}from"../chunks/DhKgvZ7w.js";import{i as J}from"../chunks/Cf_AubVn.js";import{U as ie,e as Ye}from"../chunks/2tYnVhol.js";import{b as Ee}from"../chunks/Dy5xYZae.js";import{l as He,M as Ge,j as Ue,m as Ve}from"../chunks/CY5tHd1A.js";import{S as Je}from"../chunks/Bg3C4fWk.js";import{B as Qe}from"../chunks/2LmL3n0M.js";import{T as Xe}from"../chunks/hYv-bLnA.js";function O(s){return Array.isArray?Array.isArray(s):De(s)==="[object Array]"}function Ze(s){if(typeof s=="string")return s;let e=s+"";return e=="0"&&1/s==-1/0?"-0":e}function qe(s){return s==null?"":Ze(s)}function L(s){return typeof s=="string"}function ve(s){return typeof s=="number"}function et(s){return s===!0||s===!1||tt(s)&&De(s)=="[object Boolean]"}function Be(s){return typeof s=="object"}function tt(s){return Be(s)&&s!==null}function w(s){return s!=null}function ce(s){return!s.trim().length}function De(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}const st="Incorrect 'index' type",rt=s=>`Invalid value for key ${s}`,nt=s=>`Pattern length exceeds max of ${s}.`,it=s=>`Missing ${s} property in key`,ct=s=>`Property 'weight' in key '${s}' must be a positive integer`,Ce=Object.prototype.hasOwnProperty;class ot{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let i=ye(r);this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ye(s){let e=null,t=null,r=null,i=1,c=null;if(L(s)||O(s))r=s,e=_e(s),t=oe(s);else{if(!Ce.call(s,"name"))throw new Error(it("name"));const o=s.name;if(r=o,Ce.call(s,"weight")&&(i=s.weight,i<=0))throw new Error(ct(o));e=_e(o),t=oe(o),c=s.getFn}return{path:e,id:t,weight:i,src:r,getFn:c}}function _e(s){return O(s)?s:s.split(".")}function oe(s){return O(s)?s.join("."):s}function ut(s,e){let t=[],r=!1;const i=(c,o,n)=>{if(w(c))if(!o[n])t.push(c);else{let u=o[n];const a=c[u];if(!w(a))return;if(n===o.length-1&&(L(a)||ve(a)||et(a)))t.push(qe(a));else if(O(a)){r=!0;for(let h=0,f=a.length;h<f;h+=1)i(a[h],o,n+1)}else o.length&&i(a,o,n+1)}};return i(s,L(e)?e.split("."):e,0),r?t:t[0]}const at={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ht={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(s,e)=>s.score===e.score?s.idx<e.idx?-1:1:s.score<e.score?-1:1},lt={location:0,threshold:.6,distance:100},ft={useExtendedSearch:!1,getFn:ut,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var l={...ht,...at,...lt,...ft};const dt=/[^ ]+/g;function pt(s=1,e=3){const t=new Map,r=Math.pow(10,e);return{get(i){const c=i.match(dt).length;if(t.has(c))return t.get(c);const o=1/Math.pow(c,.5*s),n=parseFloat(Math.round(o*r)/r);return t.set(c,n),n},clear(){t.clear()}}}class de{constructor({getFn:e=l.getFn,fieldNormWeight:t=l.fieldNormWeight}={}){this.norm=pt(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,L(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();L(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!w(e)||ce(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((i,c)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(w(o)){if(O(o)){let n=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:a,value:h}=u.pop();if(w(h))if(L(h)&&!ce(h)){let f={v:h,i:a,n:this.norm.get(h)};n.push(f)}else O(h)&&h.forEach((f,p)=>{u.push({nestedArrIndex:p,value:f})})}r.$[c]=n}else if(L(o)&&!ce(o)){let n={v:o,n:this.norm.get(o)};r.$[c]=n}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function we(s,e,{getFn:t=l.getFn,fieldNormWeight:r=l.fieldNormWeight}={}){const i=new de({getFn:t,fieldNormWeight:r});return i.setKeys(s.map(ye)),i.setSources(e),i.create(),i}function gt(s,{getFn:e=l.getFn,fieldNormWeight:t=l.fieldNormWeight}={}){const{keys:r,records:i}=s,c=new de({getFn:e,fieldNormWeight:t});return c.setKeys(r),c.setIndexRecords(i),c}function q(s,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:i=l.distance,ignoreLocation:c=l.ignoreLocation}={}){const o=e/s.length;if(c)return o;const n=Math.abs(r-t);return i?o+n/i:n?1:o}function mt(s=[],e=l.minMatchCharLength){let t=[],r=-1,i=-1,c=0;for(let o=s.length;c<o;c+=1){let n=s[c];n&&r===-1?r=c:!n&&r!==-1&&(i=c-1,i-r+1>=e&&t.push([r,i]),r=-1)}return s[c-1]&&c-r>=e&&t.push([r,c-1]),t}const z=32;function At(s,e,t,{location:r=l.location,distance:i=l.distance,threshold:c=l.threshold,findAllMatches:o=l.findAllMatches,minMatchCharLength:n=l.minMatchCharLength,includeMatches:u=l.includeMatches,ignoreLocation:a=l.ignoreLocation}={}){if(e.length>z)throw new Error(nt(z));const h=e.length,f=s.length,p=Math.max(0,Math.min(r,f));let g=c,m=p;const _=n>1||u,D=_?Array(f):[];let x;for(;(x=s.indexOf(e,m))>-1;){let A=q(e,{currentLocation:x,expectedLocation:p,distance:i,ignoreLocation:a});if(g=Math.min(A,g),m=x+h,_){let F=0;for(;F<h;)D[x+F]=1,F+=1}}m=-1;let C=[],I=1,j=h+f;const se=1<<h-1;for(let A=0;A<h;A+=1){let F=0,M=j;for(;F<M;)q(e,{errors:A,currentLocation:p+M,expectedLocation:p,distance:i,ignoreLocation:a})<=g?F=M:j=M,M=Math.floor((j-F)/2+F);j=M;let Y=Math.max(1,p-M+1),H=o?f:Math.min(p+M,f)+h,N=Array(H+2);N[H+1]=(1<<A)-1;for(let y=H;y>=Y;y-=1){let G=y-1,Q=t[s.charAt(G)];if(_&&(D[G]=+!!Q),N[y]=(N[y+1]<<1|1)&Q,A&&(N[y]|=(C[y+1]|C[y])<<1|1|C[y+1]),N[y]&se&&(I=q(e,{errors:A,currentLocation:G,expectedLocation:p,distance:i,ignoreLocation:a}),I<=g)){if(g=I,m=G,m<=p)break;Y=Math.max(1,2*p-m)}}if(q(e,{errors:A+1,currentLocation:p,expectedLocation:p,distance:i,ignoreLocation:a})>g)break;C=N}const $={isMatch:m>=0,score:Math.max(.001,I)};if(_){const A=mt(D,n);A.length?u&&($.indices=A):$.isMatch=!1}return $}function Et(s){let e={};for(let t=0,r=s.length;t<r;t+=1){const i=s.charAt(t);e[i]=(e[i]||0)|1<<r-t-1}return e}const ee=String.prototype.normalize?(s=>s.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(s=>s);class Se{constructor(e,{location:t=l.location,threshold:r=l.threshold,distance:i=l.distance,includeMatches:c=l.includeMatches,findAllMatches:o=l.findAllMatches,minMatchCharLength:n=l.minMatchCharLength,isCaseSensitive:u=l.isCaseSensitive,ignoreDiacritics:a=l.ignoreDiacritics,ignoreLocation:h=l.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:i,includeMatches:c,findAllMatches:o,minMatchCharLength:n,isCaseSensitive:u,ignoreDiacritics:a,ignoreLocation:h},e=u?e:e.toLowerCase(),e=a?ee(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const f=(g,m)=>{this.chunks.push({pattern:g,alphabet:Et(g),startIndex:m})},p=this.pattern.length;if(p>z){let g=0;const m=p%z,_=p-m;for(;g<_;)f(this.pattern.substr(g,z),g),g+=z;if(m){const D=p-z;f(this.pattern.substr(D),D)}}else f(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:r,includeMatches:i}=this.options;if(e=t?e:e.toLowerCase(),e=r?ee(e):e,this.pattern===e){let _={isMatch:!0,score:0};return i&&(_.indices=[[0,e.length-1]]),_}const{location:c,distance:o,threshold:n,findAllMatches:u,minMatchCharLength:a,ignoreLocation:h}=this.options;let f=[],p=0,g=!1;this.chunks.forEach(({pattern:_,alphabet:D,startIndex:x})=>{const{isMatch:C,score:I,indices:j}=At(e,_,D,{location:c+x,distance:o,threshold:n,findAllMatches:u,minMatchCharLength:a,includeMatches:i,ignoreLocation:h});C&&(g=!0),p+=I,C&&j&&(f=[...f,...j])});let m={isMatch:g,score:g?p/this.chunks.length:1};return g&&i&&(m.indices=f),m}}class K{constructor(e){this.pattern=e}static isMultiMatch(e){return xe(e,this.multiRegex)}static isSingleMatch(e){return xe(e,this.singleRegex)}search(){}}function xe(s,e){const t=s.match(e);return t?t[1]:null}class Ct extends K{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class _t extends K{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class xt extends K{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Ft extends K{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Mt extends K{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class vt extends K{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Ie extends K{constructor(e,{location:t=l.location,threshold:r=l.threshold,distance:i=l.distance,includeMatches:c=l.includeMatches,findAllMatches:o=l.findAllMatches,minMatchCharLength:n=l.minMatchCharLength,isCaseSensitive:u=l.isCaseSensitive,ignoreDiacritics:a=l.ignoreDiacritics,ignoreLocation:h=l.ignoreLocation}={}){super(e),this._bitapSearch=new Se(e,{location:t,threshold:r,distance:i,includeMatches:c,findAllMatches:o,minMatchCharLength:n,isCaseSensitive:u,ignoreDiacritics:a,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class $e extends K{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,r;const i=[],c=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+c,i.push([r,t-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const ue=[Ct,$e,xt,Ft,vt,Mt,_t,Ie],Fe=ue.length,Bt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Dt="|";function yt(s,e={}){return s.split(Dt).map(t=>{let r=t.trim().split(Bt).filter(c=>c&&!!c.trim()),i=[];for(let c=0,o=r.length;c<o;c+=1){const n=r[c];let u=!1,a=-1;for(;!u&&++a<Fe;){const h=ue[a];let f=h.isMultiMatch(n);f&&(i.push(new h(f,e)),u=!0)}if(!u)for(a=-1;++a<Fe;){const h=ue[a];let f=h.isSingleMatch(n);if(f){i.push(new h(f,e));break}}}return i})}const wt=new Set([Ie.type,$e.type]);class St{constructor(e,{isCaseSensitive:t=l.isCaseSensitive,ignoreDiacritics:r=l.ignoreDiacritics,includeMatches:i=l.includeMatches,minMatchCharLength:c=l.minMatchCharLength,ignoreLocation:o=l.ignoreLocation,findAllMatches:n=l.findAllMatches,location:u=l.location,threshold:a=l.threshold,distance:h=l.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:c,findAllMatches:n,ignoreLocation:o,location:u,threshold:a,distance:h},e=t?e:e.toLowerCase(),e=r?ee(e):e,this.pattern=e,this.query=yt(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:c}=this.options;e=i?e:e.toLowerCase(),e=c?ee(e):e;let o=0,n=[],u=0;for(let a=0,h=t.length;a<h;a+=1){const f=t[a];n.length=0,o=0;for(let p=0,g=f.length;p<g;p+=1){const m=f[p],{isMatch:_,indices:D,score:x}=m.search(e);if(_){if(o+=1,u+=x,r){const C=m.constructor.type;wt.has(C)?n=[...n,...D]:n.push(D)}}else{u=0,o=0,n.length=0;break}}if(o){let p={isMatch:!0,score:u/o};return r&&(p.indices=n),p}}return{isMatch:!1,score:1}}}const ae=[];function It(...s){ae.push(...s)}function he(s,e){for(let t=0,r=ae.length;t<r;t+=1){let i=ae[t];if(i.condition(s,e))return new i(s,e)}return new Se(s,e)}const te={AND:"$and",OR:"$or"},le={PATH:"$path",PATTERN:"$val"},fe=s=>!!(s[te.AND]||s[te.OR]),$t=s=>!!s[le.PATH],kt=s=>!O(s)&&Be(s)&&!fe(s),Me=s=>({[te.AND]:Object.keys(s).map(e=>({[e]:s[e]}))});function ke(s,e,{auto:t=!0}={}){const r=i=>{let c=Object.keys(i);const o=$t(i);if(!o&&c.length>1&&!fe(i))return r(Me(i));if(kt(i)){const u=o?i[le.PATH]:c[0],a=o?i[le.PATTERN]:i[u];if(!L(a))throw new Error(rt(u));const h={keyId:oe(u),pattern:a};return t&&(h.searcher=he(a,e)),h}let n={children:[],operator:c[0]};return c.forEach(u=>{const a=i[u];O(a)&&a.forEach(h=>{n.children.push(r(h))})}),n};return fe(s)||(s=Me(s)),r(s)}function bt(s,{ignoreFieldNorm:e=l.ignoreFieldNorm}){s.forEach(t=>{let r=1;t.matches.forEach(({key:i,norm:c,score:o})=>{const n=i?i.weight:null;r*=Math.pow(o===0&&n?Number.EPSILON:o,(n||1)*(e?1:c))}),t.score=r})}function Lt(s,e){const t=s.matches;e.matches=[],w(t)&&t.forEach(r=>{if(!w(r.indices)||!r.indices.length)return;const{indices:i,value:c}=r;let o={indices:i,value:c};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function Rt(s,e){e.score=s.score}function jt(s,e,{includeMatches:t=l.includeMatches,includeScore:r=l.includeScore}={}){const i=[];return t&&i.push(Lt),r&&i.push(Rt),s.map(c=>{const{idx:o}=c,n={item:e[o],refIndex:o};return i.length&&i.forEach(u=>{u(c,n)}),n})}class T{constructor(e,t={},r){this.options={...l,...t},this.options.useExtendedSearch,this._keyStore=new ot(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof de))throw new Error(st);this._myIndex=t||we(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){w(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let r=0,i=this._docs.length;r<i;r+=1){const c=this._docs[r];e(c,r)&&(this.removeAt(r),r-=1,i-=1,t.push(c))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:c,sortFn:o,ignoreFieldNorm:n}=this.options;let u=L(e)?L(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return bt(u,{ignoreFieldNorm:n}),c&&u.sort(o),ve(t)&&t>-1&&(u=u.slice(0,t)),jt(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const t=he(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:c,i:o,n})=>{if(!w(c))return;const{isMatch:u,score:a,indices:h}=t.searchIn(c);u&&i.push({item:c,idx:o,matches:[{score:a,value:c,norm:n,indices:h}]})}),i}_searchLogical(e){const t=ke(e,this.options),r=(n,u,a)=>{if(!n.children){const{keyId:f,searcher:p}=n,g=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(u,f),searcher:p});return g&&g.length?[{idx:a,item:u,matches:g}]:[]}const h=[];for(let f=0,p=n.children.length;f<p;f+=1){const g=n.children[f],m=r(g,u,a);if(m.length)h.push(...m);else if(n.operator===te.AND)return[]}return h},i=this._myIndex.records,c={},o=[];return i.forEach(({$:n,i:u})=>{if(w(n)){let a=r(t,n,u);a.length&&(c[u]||(c[u]={idx:u,item:n,matches:[]},o.push(c[u])),a.forEach(({matches:h})=>{c[u].matches.push(...h)}))}}),o}_searchObjectList(e){const t=he(e,this.options),{keys:r,records:i}=this._myIndex,c=[];return i.forEach(({$:o,i:n})=>{if(!w(o))return;let u=[];r.forEach((a,h)=>{u.push(...this._findMatches({key:a,value:o[h],searcher:t}))}),u.length&&c.push({idx:n,item:o,matches:u})}),c}_findMatches({key:e,value:t,searcher:r}){if(!w(t))return[];let i=[];if(O(t))t.forEach(({v:c,i:o,n})=>{if(!w(c))return;const{isMatch:u,score:a,indices:h}=r.searchIn(c);u&&i.push({score:a,key:e,value:c,idx:o,norm:n,indices:h})});else{const{v:c,n:o}=t,{isMatch:n,score:u,indices:a}=r.searchIn(c);n&&i.push({score:u,key:e,value:c,norm:o,indices:a})}return i}}T.version="7.1.0";T.createIndex=we;T.parseIndex=gt;T.config=l;T.parseQuery=ke;It(St);class Ot{projectsFuse;experiencesFuse;skillsFuse;constructor(e,t,r){this.projectsFuse=new T(e,{keys:[{name:"name",weight:2},{name:"shortDescription",weight:1.5},{name:"description",weight:1},{name:"type",weight:1},{name:"skills.name",weight:.8}],threshold:.4,includeScore:!0,minMatchCharLength:2,shouldSort:!0}),this.experiencesFuse=new T(t,{keys:[{name:"name",weight:2},{name:"company",weight:2},{name:"shortDescription",weight:1.5},{name:"description",weight:1},{name:"type",weight:1},{name:"location",weight:.8},{name:"skills.name",weight:.8}],threshold:.4,includeScore:!0,minMatchCharLength:2,shouldSort:!0}),this.skillsFuse=new T(r,{keys:[{name:"name",weight:2},{name:"description",weight:1}],threshold:.3,includeScore:!0,minMatchCharLength:2,shouldSort:!0})}search(e,t=50){if(!e||e.trim().length<2)return[];const r=[],i=this.projectsFuse.search(e);r.push(...i.map(n=>({data:n.item,icon:"i-carbon-cube",name:n.item.name,to:`projects/${n.item.slug}`,score:n.score,type:"project"})));const c=this.experiencesFuse.search(e);r.push(...c.map(n=>({data:n.item,icon:"i-carbon-development",name:`${n.item.name} @ ${n.item.company}`,to:`experience/${n.item.slug}`,score:n.score,type:"experience"})));const o=this.skillsFuse.search(e);return r.push(...o.map(n=>({data:n.item,icon:"i-carbon-software-resource-cluster",name:n.item.name,to:`skills/${n.item.slug}`,score:n.score,type:"skill"}))),r.sort((n,u)=>(n.score??1)-(u.score??1)).slice(0,t)}searchProjects(e,t=20){return!e||e.trim().length<2?[]:this.projectsFuse.search(e,{limit:t}).map(r=>({data:r.item,icon:"i-carbon-cube",name:r.item.name,to:`projects/${r.item.slug}`,score:r.score,type:"project"}))}searchExperiences(e,t=20){return!e||e.trim().length<2?[]:this.experiencesFuse.search(e,{limit:t}).map(r=>({data:r.item,icon:"i-carbon-development",name:`${r.item.name} @ ${r.item.company}`,to:`experience/${r.item.slug}`,score:r.score,type:"experience"}))}searchSkills(e,t=20){return!e||e.trim().length<2?[]:this.skillsFuse.search(e,{limit:t}).map(r=>({data:r.item,icon:"i-carbon-software-resource-cluster",name:r.item.name,to:`skills/${r.item.slug}`,score:r.score,type:"skill"}))}}var Nt=R('<div class="flex-1 self-center col-center m-t-10 gap-5 font-300 text-[var(--accent-text)]"><!> <span>Try typing something...</span></div>'),Pt=R('<div class="flex-1 self-center col-center m-t-10 gap-5 font-300 text-[var(--accent-text)]"><!> <span> </span></div>'),Tt=R("<span> </span>"),Kt=R("<span> </span>"),Wt=R("<span> </span>"),zt=R("<!> <span> </span>",1),Yt=R('<div class="flex flex-row flex-wrap gap-2 text-sm text-[var(--accent-text)]"><span class="font-semibold"> </span> <!> <!> <!></div> <div class="flex flex-row flex-wrap gap-1"></div>',1),Ht=R('<div class="flex flex-col gap-4"><!></div>'),Gt=R('<div class="flex flex-col items-stretch gap-10 p-2"></div> <!>',1),Ut=R("<!> <!>",1);function cs(s,e){Oe(e,!1);const{title:t,description:r}=Ve,i=new Ot(He,Ge,Ue);let c=ne(""),o=ne([]),n=ne({projects:0,experiences:0,skills:0});je(()=>{const f=new URLSearchParams(window.location.search);Z(c,f.get("q")??"")}),Ne(()=>(d(o),d(c)),()=>{Z(o,i.search(d(c),50)),Z(n,{projects:d(o).filter(f=>f.type==="project").length,experiences:d(o).filter(f=>f.type==="experience").length,skills:d(o).filter(f=>f.type==="skill").length})}),Pe(),Re();var u=Ut(),a=X(u);Xe(a,{get title(){return t},get description(){return r},path:"/search"});var h=P(a,2);Je(h,{get title(){return t},onsearch:f=>Z(c,f.detail.search),children:(f,p)=>{var g=Gt(),m=P(X(g),2);{var _=x=>{var C=Nt(),I=b(C);ie(I,{icon:"i-carbon-search-locate-mirror",classes:"text-2em"}),Ke(2),S(C),k(x,C)},D=x=>{var C=Ht(),I=b(C);{var j=$=>{var A=Pt(),F=b(A);ie(F,{icon:"i-carbon-cube",classes:"text-2em"});var M=P(F,2),Y=b(M);S(M),S(A),U(()=>V(Y,`Oops! Nothing found for "${d(c)??""}"`)),k($,A)},se=$=>{var A=Yt(),F=X(A),M=b(F),Y=b(M);S(M);var H=P(M,2);{var N=v=>{var E=Tt(),W=b(E);S(E),U(()=>V(W,`${d(n),B(()=>d(n).projects)??""} project${d(n),B(()=>d(n).projects!==1?"s":"")??""}`)),k(v,E)};J(H,v=>{d(n),B(()=>d(n).projects>0)&&v(N)})}var re=P(H,2);{var y=v=>{var E=Kt(),W=b(E);S(E),U(()=>V(W,`• ${d(n),B(()=>d(n).experiences)??""} experience${d(n),B(()=>d(n).experiences!==1?"s":"")??""}`)),k(v,E)};J(re,v=>{d(n),B(()=>d(n).experiences>0)&&v(y)})}var G=P(re,2);{var Q=v=>{var E=Wt(),W=b(E);S(E),U(()=>V(W,`• ${d(n),B(()=>d(n).skills)??""} skill${d(n),B(()=>d(n).skills!==1?"s":"")??""}`)),k(v,E)};J(G,v=>{d(n),B(()=>d(n).skills>0)&&v(Q)})}S(F);var pe=P(F,2);Ye(pe,5,()=>d(o),v=>v.to,(v,E)=>{{let W=We(()=>(ze(Ee),d(E),B(()=>`${Ee}/${d(E).to}`)));Qe(v,{get href(){return d(W)},class:"flex flex-row items-center gap-2",children:(be,Vt)=>{var ge=zt(),me=X(ge);ie(me,{get icon(){return d(E),B(()=>d(E).icon)}});var Ae=P(me,2),Le=b(Ae,!0);S(Ae),U(()=>V(Le,(d(E),B(()=>d(E).name)))),k(be,ge)},$$slots:{default:!0}})}}),S(pe),U(()=>V(Y,`${d(o),B(()=>d(o).length)??""} result${d(o),B(()=>d(o).length!==1?"s":"")??""} found:`)),k($,A)};J(I,$=>{d(o),B(()=>d(o).length===0)?$(j):$(se,!1)})}S(C),k(x,C)};J(m,x=>{d(c)?x(D,!1):x(_)})}k(f,g)},$$slots:{default:!0}}),k(s,u),Te()}export{cs as component};
